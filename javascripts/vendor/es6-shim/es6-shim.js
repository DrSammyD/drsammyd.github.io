!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.returnExports=t()}(this,function(){"use strict";var e,t=function(e){try{e()}catch(t){return!1}return!0},n=function(e,t){try{var n=function(){e.apply(this,arguments)};return n.__proto__?(Object.setPrototypeOf(n,e),n.prototype=Object.create(e.prototype,{constructor:{value:e}}),t(n)):!1}catch(r){return!1}},r=function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}},i=function(){var e=!1;if(String.prototype.startsWith)try{"/a/".startsWith(/a/)}catch(t){e=!0}return e},o=new Function("return this;"),a=o(),u=a.isFinite,s=!!Object.defineProperty&&r(),c=i(),l=Function.call.bind(String.prototype.indexOf),f=Function.call.bind(Object.prototype.toString),d=Function.call.bind(Object.prototype.hasOwnProperty),p=function(){},h=a.Symbol||{},m={string:function(e){return"[object String]"===f(e)},regex:function(e){return"[object RegExp]"===f(e)},symbol:function(e){return"function"==typeof a.Symbol&&"symbol"==typeof e}},v=function(e,t,n,r){!r&&t in e||(s?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},g={getter:function(e,t,n){if(!s)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},proxy:function(e,t,n){if(!s)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},redefine:function(e,t,n){if(s){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n}},y=function(e,t){Object.keys(t).forEach(function(n){var r=t[n];v(e,n,r,!1)})},b=Object.create||function(e,t){function n(){}n.prototype=e;var r=new n;return"undefined"!=typeof t&&y(r,t),r},w=m.symbol(h.iterator)?h.iterator:"_es6-shim iterator_";a.Set&&"function"==typeof(new a.Set)["@@iterator"]&&(w="@@iterator");var T=function(e,t){t||(t=function(){return this});var n={};n[w]=t,y(e,n),!e[w]&&m.symbol(w)&&(e[w]=t)},k=function(e){var t=f(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===f(e.callee)),n},x={CheckObjectCoercible:function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return null!=e&&Object(e)===e},ToObject:function(e,t){return Object(x.CheckObjectCoercible(e,t))},IsCallable:function(e){return"function"==typeof e&&"[object Function]"===f(e)},ToInt32:function(e){return x.ToNumber(e)>>0},ToUint32:function(e){return x.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===f(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=x.ToNumber(e);return Number.isNaN(t)?0:0!==t&&Number.isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},ToLength:function(e){var t=x.ToInteger(e);return 0>=t?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0===e?1/e===1/t:!0:Number.isNaN(e)&&Number.isNaN(t)},SameValueZero:function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)},IsIterable:function(e){return x.TypeIsObject(e)&&("undefined"!=typeof e[w]||k(e))},GetIterator:function(t){if(k(t))return new e(t,"value");var n=t[w];if(!x.IsCallable(n))throw new TypeError("value is not an iterable");var r=n.call(t);if(!x.TypeIsObject(r))throw new TypeError("bad iterator");return r},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!x.TypeIsObject(t))throw new TypeError("bad iterator");return t},Construct:function(e,t){var n;n=x.IsCallable(e["@@create"])?e["@@create"]():b(e.prototype||null),y(n,{_es6construct:!0});var r=e.apply(n,t);return x.TypeIsObject(r)?r:n}},D=function(e){if(!x.TypeIsObject(e))throw new TypeError("bad object");return e._es6construct||(e.constructor&&x.IsCallable(e.constructor["@@create"])&&(e=e.constructor["@@create"](e)),y(e,{_es6construct:!0})),e},I=function(){function e(e){var t=Math.floor(e),n=e-t;return.5>n?t:n>.5?t+1:t%2?t+1:t}function t(t,n,r){var i,o,a,u,s,c,l,f=(1<<n-1)-1;for(t!==t?(o=(1<<n)-1,a=Math.pow(2,r-1),i=0):1/0===t||t===-1/0?(o=(1<<n)-1,a=0,i=0>t?1:0):0===t?(o=0,a=0,i=1/t===-1/0?1:0):(i=0>t,t=Math.abs(t),t>=Math.pow(2,1-f)?(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),a=e(t/Math.pow(2,o)*Math.pow(2,r)),a/Math.pow(2,r)>=2&&(o+=1,a=1),o>f?(o=(1<<n)-1,a=0):(o+=f,a-=Math.pow(2,r))):(o=0,a=e(t/Math.pow(2,1-f-r)))),s=[],u=r;u;u-=1)s.push(a%2?1:0),a=Math.floor(a/2);for(u=n;u;u-=1)s.push(o%2?1:0),o=Math.floor(o/2);for(s.push(i?1:0),s.reverse(),c=s.join(""),l=[];c.length;)l.push(parseInt(c.slice(0,8),2)),c=c.slice(8);return l}function n(e,t,n){var r,i,o,a,u,s,c,l,f=[];for(r=e.length;r;r-=1)for(o=e[r-1],i=8;i;i-=1)f.push(o%2?1:0),o>>=1;return f.reverse(),a=f.join(""),u=(1<<t-1)-1,s=parseInt(a.slice(0,1),2)?-1:1,c=parseInt(a.slice(1,1+t),2),l=parseInt(a.slice(1+t),2),c===(1<<t)-1?0!==l?0/0:1/0*s:c>0?s*Math.pow(2,c-u)*(1+l/Math.pow(2,n)):0!==l?s*Math.pow(2,-(u-1))*(l/Math.pow(2,n)):0>s?-0:0}function r(e){return n(e,8,23)}function i(e){return t(e,8,23)}var o={toFloat32:function(e){return r(i(e))}};if("undefined"!=typeof Float32Array){var a=new Float32Array(1);o.toFloat32=function(e){return a[0]=e,a[0]}}return o}();if(y(String,{fromCodePoint:function(){for(var e,t=[],n=0,r=arguments.length;r>n;n++){if(e=Number(arguments[n]),!x.SameValue(e,x.ToInteger(e))||0>e||e>1114111)throw new RangeError("Invalid code point "+e);65536>e?t.push(String.fromCharCode(e)):(e-=65536,t.push(String.fromCharCode((e>>10)+55296)),t.push(String.fromCharCode(e%1024+56320)))}return t.join("")},raw:function(e){var t=x.ToObject(e,"bad callSite"),n=t.raw,r=x.ToObject(n,"bad raw value"),i=r.length,o=x.ToLength(i);if(0>=o)return"";for(var a,u,s,c,l=[],f=0;o>f&&(a=String(f),u=r[a],s=String(u),l.push(s),!(f+1>=o));)u=f+1<arguments.length?arguments[f+1]:"",c=String(u),l.push(c),f++;return l.join("")}}),1!==String.fromCodePoint.length){var O=Function.apply.bind(String.fromCodePoint);v(String,"fromCodePoint",function(){return O(this,arguments)},!0)}var S={repeat:function(){var e=function(t,n){if(1>n)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r};return function(t){var n=String(x.CheckObjectCoercible(this));if(t=x.ToInteger(t),0>t||1/0===t)throw new RangeError("Invalid String#repeat value");return e(n,t)}}(),startsWith:function(e){var t=String(x.CheckObjectCoercible(this));if(m.regex(e))throw new TypeError('Cannot call method "startsWith" with a regex');e=String(e);var n=arguments.length>1?arguments[1]:void 0,r=Math.max(x.ToInteger(n),0);return t.slice(r,r+e.length)===e},endsWith:function(e){var t=String(x.CheckObjectCoercible(this));if(m.regex(e))throw new TypeError('Cannot call method "endsWith" with a regex');e=String(e);var n=t.length,r=arguments.length>1?arguments[1]:void 0,i="undefined"==typeof r?n:x.ToInteger(r),o=Math.min(Math.max(i,0),n);return t.slice(o-e.length,o)===e},includes:function(e){var t=arguments.length>1?arguments[1]:void 0;return-1!==l(this,e,t)},codePointAt:function(e){var t=String(x.CheckObjectCoercible(this)),n=x.ToInteger(e),r=t.length;if(n>=0&&r>n){var i=t.charCodeAt(n),o=n+1===r;if(55296>i||i>56319||o)return i;var a=t.charCodeAt(n+1);return 56320>a||a>57343?i:1024*(i-55296)+(a-56320)+65536}}};y(String.prototype,S);var j=1!=="".trim().length;if(j){delete String.prototype.trim;var _=["	\n\f\r   ᠎    ","         　\u2028","\u2029﻿"].join(""),M=new RegExp("(^["+_+"]+)|(["+_+"]+$)","g");y(String.prototype,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(M,"")}})}var C=function(e){this._s=String(x.CheckObjectCoercible(e)),this._i=0};C.prototype.next=function(){var e=this._s,t=this._i;if("undefined"==typeof e||t>=e.length)return this._s=void 0,{value:void 0,done:!0};var n,r,i=e.charCodeAt(t);return 55296>i||i>56319||t+1===e.length?r=1:(n=e.charCodeAt(t+1),r=56320>n||n>57343?1:2),this._i=t+r,{value:e.substr(t,r),done:!1}},T(C.prototype),T(String.prototype,function(){return new C(this)}),c||y(String.prototype,{startsWith:S.startsWith,endsWith:S.endsWith});var E={from:function(e){var t=arguments.length>1?arguments[1]:void 0,n=x.ToObject(e,"bad iterable");if("undefined"!=typeof t&&!x.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");var r,i,o,a,u=arguments.length>2,s=u?arguments[2]:void 0,c=x.IsIterable(n);if(c){o=0,i=x.IsCallable(this)?Object(new this):[];var l,f=c?x.GetIterator(n):null;do l=x.IteratorNext(f),l.done||(a=l.value,i[o]=t?u?t.call(s,a,o):t(a,o):a,o+=1);while(!l.done);r=o}else for(r=x.ToLength(n.length),i=x.IsCallable(this)?Object(new this(r)):new Array(r),o=0;r>o;++o)a=n[o],i[o]=t?u?t.call(s,a,o):t(a,o):a;return i.length=r,i},of:function(){return Array.from(arguments)}};y(Array,E);var N=function(){try{return 0===Array.from({length:-1}).length}catch(e){return!1}};N()||v(Array,"from",E.from,!0),e=function(e,t){this.i=0,this.array=e,this.kind=t},y(e.prototype,{next:function(){var t=this.i,n=this.array;if(!(this instanceof e))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof n)for(var r=x.ToLength(n.length);r>t;t++){var i,o=this.kind;return"key"===o?i=t:"value"===o?i=n[t]:"entry"===o&&(i=[t,n[t]]),this.i=t+1,{value:i,done:!1}}return this.array=void 0,{value:void 0,done:!0}}}),T(e.prototype);var A={copyWithin:function(e,t){var n=arguments[2],r=x.ToObject(this),i=x.ToLength(r.length);e=x.ToInteger(e),t=x.ToInteger(t);var o=0>e?Math.max(i+e,0):Math.min(e,i),a=0>t?Math.max(i+t,0):Math.min(t,i);n="undefined"==typeof n?i:x.ToInteger(n);var u=0>n?Math.max(i+n,0):Math.min(n,i),s=Math.min(u-a,i-o),c=1;for(o>a&&a+s>o&&(c=-1,a+=s-1,o+=s-1);s>0;)d(r,a)?r[o]=r[a]:delete r[a],a+=c,o+=c,s-=1;return r},fill:function(e){var t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=x.ToObject(this),i=x.ToLength(r.length);t=x.ToInteger("undefined"==typeof t?0:t),n=x.ToInteger("undefined"==typeof n?i:n);for(var o=0>t?Math.max(i+t,0):Math.min(t,i),a=0>n?i+n:n,u=o;i>u&&a>u;++u)r[u]=e;return r},find:function(e){var t=x.ToObject(this),n=x.ToLength(t.length);if(!x.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var r,i=arguments.length>1?arguments[1]:null,o=0;n>o;o++)if(r=t[o],i){if(e.call(i,r,o,t))return r}else if(e(r,o,t))return r},findIndex:function(e){var t=x.ToObject(this),n=x.ToLength(t.length);if(!x.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var r=arguments.length>1?arguments[1]:null,i=0;n>i;i++)if(r){if(e.call(r,t[i],i,t))return i}else if(e(t[i],i,t))return i;return-1},keys:function(){return new e(this,"key")},values:function(){return new e(this,"value")},entries:function(){return new e(this,"entry")}};Array.prototype.keys&&!x.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!x.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[w]&&(y(Array.prototype,{values:Array.prototype[w]}),m.symbol(h.unscopables)&&(Array.prototype[h.unscopables].values=!0)),y(Array.prototype,A),T(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&T(Object.getPrototypeOf([].values()));var F=Math.pow(2,53)-1;y(Number,{MAX_SAFE_INTEGER:F,MIN_SAFE_INTEGER:-F,EPSILON:2.220446049250313e-16,parseInt:a.parseInt,parseFloat:a.parseFloat,isFinite:function(e){return"number"==typeof e&&u(e)},isInteger:function(e){return Number.isFinite(e)&&x.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER},isNaN:function(e){return e!==e}}),[,1].find(function(e,t){return 0===t})||v(Array.prototype,"find",A.find,!0),0!==[,1].findIndex(function(e,t){return 0===t})&&v(Array.prototype,"findIndex",A.findIndex,!0),s&&y(Object,{assign:function(e){if(!x.TypeIsObject(e))throw new TypeError("target must be an object");return Array.prototype.reduce.call(arguments,function(e,t){return Object.keys(Object(t)).reduce(function(e,n){return e[n]=t[n],e},e)})},is:function(e,t){return x.SameValue(e,t)},setPrototypeOf:function(e,t){var n,r=function(e,t){if(!x.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!x.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)},i=function(e,t){return r(e,t),n.call(e,t),e};try{n=e.getOwnPropertyDescriptor(e.prototype,t).set,n.call({},null)}catch(o){if(e.prototype!=={}[t])return;n=function(e){this[t]=e},i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")}),Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&!function(){var e=Object.create(null),t=Object.getPrototypeOf,n=Object.setPrototypeOf;Object.getPrototypeOf=function(n){var r=t(n);return r===e?null:r},Object.setPrototypeOf=function(t,r){return null===r&&(r=e),n(t,r)},Object.setPrototypeOf.polyfill=!1}();try{Object.keys("foo")}catch(R){var V=Object.keys;Object.keys=function(e){return V(x.ToObject(e))}}if(!RegExp.prototype.flags&&s){var P=function(){if(!x.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e};g.getter(RegExp.prototype,"flags",P)}var z=function(){try{return"/a/i"===String(new RegExp(/a/g,"i"))}catch(e){return!1}}();if(!z&&s){var q=RegExp,H=function Q(e,t){return m.regex(e)&&m.string(t)?new Q(e.source,t):new q(e,t)};v(H,"toString",q.toString.bind(q),!0),Object.setPrototypeOf&&Object.setPrototypeOf(q,H),Object.getOwnPropertyNames(q).forEach(function(e){"$input"!==e&&(e in p||g.proxy(q,e,H))}),H.prototype=q.prototype,g.redefine(q.prototype,"constructor",H),RegExp=H,g.redefine(a,"RegExp",H)}var Y={acosh:function(e){return e=Number(e),Number.isNaN(e)||1>e?0/0:1===e?0:1/0===e?e:Math.log(e+Math.sqrt(e*e-1))},asinh:function(e){return e=Number(e),0!==e&&u(e)?0>e?-Math.asinh(-e):Math.log(e+Math.sqrt(e*e+1)):e},atanh:function(e){return e=Number(e),Number.isNaN(e)||-1>e||e>1?0/0:-1===e?-1/0:1===e?1/0:0===e?e:.5*Math.log((1+e)/(1-e))},cbrt:function(e){if(e=Number(e),0===e)return e;var t,n=0>e;return n&&(e=-e),t=Math.pow(e,1/3),n?-t:t},clz32:function(e){e=Number(e);var t=x.ToUint32(e);return 0===t?32:32-t.toString(2).length},cosh:function(e){return e=Number(e),0===e?1:Number.isNaN(e)?0/0:u(e)?(0>e&&(e=-e),e>21?Math.exp(e)/2:(Math.exp(e)+Math.exp(-e))/2):1/0},expm1:function(e){return e=Number(e),e===-1/0?-1:u(e)&&0!==e?Math.exp(e)-1:e},hypot:function(){var e=!1,t=!0,n=!1,r=[];if(Array.prototype.every.call(arguments,function(i){var o=Number(i);return Number.isNaN(o)?e=!0:1/0===o||o===-1/0?n=!0:0!==o&&(t=!1),n?!1:(e||r.push(Math.abs(o)),!0)}),n)return 1/0;if(e)return 0/0;if(t)return 0;r.sort(function(e,t){return t-e});var i=r[0],o=r.map(function(e){return e/i}),a=o.reduce(function(e,t){return e+t*t},0);return i*Math.sqrt(a)},log2:function(e){return Math.log(e)*Math.LOG2E},log10:function(e){return Math.log(e)*Math.LOG10E},log1p:function(e){if(e=Number(e),-1>e||Number.isNaN(e))return 0/0;if(0===e||1/0===e)return e;if(-1===e)return-1/0;var t=0,n=50;if(0>e||e>1)return Math.log(1+e);for(var r=1;n>r;r++)r%2===0?t-=Math.pow(e,r)/r:t+=Math.pow(e,r)/r;return t},sign:function(e){var t=+e;return 0===t?t:Number.isNaN(t)?t:0>t?-1:1},sinh:function(e){return e=Number(e),u(e)&&0!==e?(Math.exp(e)-Math.exp(-e))/2:e},tanh:function(e){return e=Number(e),Number.isNaN(e)||0===e?e:1/0===e?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))},trunc:function(e){var t=Number(e);return 0>t?-Math.floor(-t):Math.floor(t)},imul:function(e,t){e=x.ToUint32(e),t=x.ToUint32(t);var n=e>>>16&65535,r=65535&e,i=t>>>16&65535,o=65535&t;return r*o+(n*o+r*i<<16>>>0)|0},fround:function(e){if(0===e||1/0===e||e===-1/0||Number.isNaN(e))return e;var t=Number(e);return I.toFloat32(t)}};y(Math,Y),-5!==Math.imul(4294967295,5)&&(Math.imul=Y.imul);var B=function(){var e,t;x.IsPromise=function(e){return x.TypeIsObject(e)&&e._promiseConstructor?"undefined"==typeof e._status?!1:!0:!1};var n,r=function(e){if(!x.IsCallable(e))throw new TypeError("bad promise constructor");var t=this,n=function(e,n){t.resolve=e,t.reject=n};if(t.promise=x.Construct(e,[n]),!t.promise._es6construct)throw new TypeError("bad promise constructor");if(!x.IsCallable(t.resolve)||!x.IsCallable(t.reject))throw new TypeError("bad promise constructor")},i=a.setTimeout;"undefined"!=typeof window&&x.IsCallable(window.postMessage)&&(n=function(){var e=[],t="zero-timeout-message",n=function(n){e.push(n),window.postMessage(t,"*")},r=function(n){if(n.source===window&&n.data===t){if(n.stopPropagation(),0===e.length)return;var r=e.shift();r()}};return window.addEventListener("message",r,!0),n});var o=function(){var e=a.Promise;return e&&e.resolve&&function(t){return e.resolve().then(t)}},u=x.IsCallable(a.setImmediate)?a.setImmediate.bind(a):"object"==typeof process&&process.nextTick?process.nextTick:o()||(x.IsCallable(n)?n():function(e){i(e,0)}),s=function(e,t){if(!x.TypeIsObject(e))return!1;var n=t.resolve,r=t.reject;try{var i=e.then;if(!x.IsCallable(i))return!1;i.call(e,n,r)}catch(o){r(o)}return!0},c=function(e,t){e.forEach(function(e){u(function(){var n=e.handler,r=e.capability,i=r.resolve,o=r.reject;try{var a=n(t);if(a===r.promise)throw new TypeError("self resolution");var u=s(a,r);u||i(a)}catch(c){o(c)}})})},l=function(e,t,n){return function(i){if(i===e)return n(new TypeError("self resolution"));var o=e._promiseConstructor,a=new r(o),u=s(i,a);return u?a.promise.then(t,n):t(i)}};e=function(e){var t=this;if(t=D(t),!t._promiseConstructor)throw new TypeError("bad promise");if("undefined"!=typeof t._status)throw new TypeError("promise already initialized");if(!x.IsCallable(e))throw new TypeError("not a valid resolver");t._status="unresolved",t._resolveReactions=[],t._rejectReactions=[];var n=function(e){if("unresolved"===t._status){var n=t._resolveReactions;t._result=e,t._resolveReactions=void 0,t._rejectReactions=void 0,t._status="has-resolution",c(n,e)}},r=function(e){if("unresolved"===t._status){var n=t._rejectReactions;t._result=e,t._resolveReactions=void 0,t._rejectReactions=void 0,t._status="has-rejection",c(n,e)}};try{e(n,r)}catch(i){r(i)}return t},t=e.prototype;var f=function(e,t,n,r){var i=!1;return function(o){if(!i&&(i=!0,t[e]=o,0===--r.count)){var a=n.resolve;a(t)}}};return y(e,{"@@create":function(e){var n=this,r=n.prototype||t;return e=e||b(r),y(e,{_status:void 0,_result:void 0,_resolveReactions:void 0,_rejectReactions:void 0,_promiseConstructor:void 0}),e._promiseConstructor=n,e},all:function(e){var t=this,n=new r(t),i=n.resolve,o=n.reject;try{if(!x.IsIterable(e))throw new TypeError("bad iterable");for(var a=x.GetIterator(e),u=[],s={count:1},c=0;;c++){var l=x.IteratorNext(a);if(l.done)break;var d=t.resolve(l.value),p=f(c,u,n,s);s.count++,d.then(p,n.reject)}0===--s.count&&i(u)}catch(h){o(h)}return n.promise},race:function(e){var t=this,n=new r(t),i=n.resolve,o=n.reject;try{if(!x.IsIterable(e))throw new TypeError("bad iterable");for(var a=x.GetIterator(e);;){var u=x.IteratorNext(a);if(u.done)break;var s=t.resolve(u.value);s.then(i,o)}}catch(c){o(c)}return n.promise},reject:function(e){var t=this,n=new r(t),i=n.reject;return i(e),n.promise},resolve:function(e){var t=this;if(x.IsPromise(e)){var n=e._promiseConstructor;if(n===t)return e}var i=new r(t),o=i.resolve;return o(e),i.promise}}),y(t,{"catch":function(e){return this.then(void 0,e)},then:function(e,t){var n=this;if(!x.IsPromise(n))throw new TypeError("not a promise");var i=this.constructor,o=new r(i);x.IsCallable(t)||(t=function(e){throw e}),x.IsCallable(e)||(e=function(e){return e});var a=l(n,e,t),u={capability:o,handler:a},s={capability:o,handler:t};switch(n._status){case"unresolved":n._resolveReactions.push(u),n._rejectReactions.push(s);break;case"has-resolution":c([u],n._result);break;case"has-rejection":c([s],n._result);break;default:throw new TypeError("unexpected")}return o.promise}}),e}();a.Promise&&(delete a.Promise.accept,delete a.Promise.defer,delete a.Promise.prototype.chain),y(a,{Promise:B});var L=n(a.Promise,function(e){return e.resolve(42)instanceof e}),W=function(){try{return a.Promise.reject(42).then(null,5).then(null,p),!0}catch(e){return!1}}(),U=function(){try{Promise.call(3,p)}catch(e){return!0}return!1}();L&&W&&U||(Promise=B,v(a,"Promise",B,!0));var G=function(e){var t=Object.keys(e.reduce(function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},$=G(["z","a","bb"]),J=G(["z",1,"a","3",2]);if(s){var Z=function(e){if(!$)return null;var t=typeof e;return"string"===t?"$"+e:"number"===t?J?e:"n"+e:null},K=function(){return Object.create?Object.create(null):{}},X={Map:function(){function e(e,t){this.key=e,this.value=t,this.next=null,this.prev=null}function t(e,t){this.head=e._head,this.i=this.head,this.kind=t}function n(t){var n=this;if(!x.TypeIsObject(n))throw new TypeError("Map does not accept arguments when called as a function");if(n=D(n),!n._es6map)throw new TypeError("bad map");var r=new e(null,null);if(r.next=r.prev=r,y(n,{_head:r,_storage:K(),_size:0}),"undefined"!=typeof t&&null!==t){var i=x.GetIterator(t),o=n.set;if(!x.IsCallable(o))throw new TypeError("bad map");for(;;){var a=x.IteratorNext(i);if(a.done)break;var u=a.value;if(!x.TypeIsObject(u))throw new TypeError("expected iterable of pairs");o.call(n,u[0],u[1])}}return n}var r={};e.prototype.isRemoved=function(){return this.key===r},t.prototype={next:function(){var e,t=this.i,n=this.kind,r=this.head;if("undefined"==typeof this.i)return{value:void 0,done:!0};for(;t.isRemoved()&&t!==r;)t=t.prev;for(;t.next!==r;)if(t=t.next,!t.isRemoved())return e="key"===n?t.key:"value"===n?t.value:[t.key,t.value],this.i=t,{value:e,done:!1};return this.i=void 0,{value:void 0,done:!0}}},T(t.prototype);var i=n.prototype;return y(n,{"@@create":function(e){var t=this,n=t.prototype||i;return e=e||b(n),y(e,{_es6map:!0}),e}}),g.getter(n.prototype,"size",function(){if("undefined"==typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size}),y(n.prototype,{get:function(e){var t=Z(e);if(null!==t){var n=this._storage[t];return n?n.value:void 0}for(var r=this._head,i=r;(i=i.next)!==r;)if(x.SameValueZero(i.key,e))return i.value},has:function(e){var t=Z(e);if(null!==t)return"undefined"!=typeof this._storage[t];for(var n=this._head,r=n;(r=r.next)!==n;)if(x.SameValueZero(r.key,e))return!0;return!1},set:function(t,n){var r,i=this._head,o=i,a=Z(t);if(null!==a){if("undefined"!=typeof this._storage[a])return this._storage[a].value=n,this;r=this._storage[a]=new e(t,n),o=i.prev}for(;(o=o.next)!==i;)if(x.SameValueZero(o.key,t))return o.value=n,this;return r=r||new e(t,n),x.SameValue(-0,t)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},"delete":function(e){var t=this._head,n=t,i=Z(e);if(null!==i){if("undefined"==typeof this._storage[i])return!1;n=this._storage[i].prev,delete this._storage[i]}for(;(n=n.next)!==t;)if(x.SameValueZero(n.key,e))return n.key=n.value=r,n.prev.next=n.next,n.next.prev=n.prev,this._size-=1,!0;return!1},clear:function(){this._size=0,this._storage=K();for(var e=this._head,t=e,n=t.next;(t=n)!==e;)t.key=t.value=r,n=t.next,t.next=t.prev=e;e.next=e.prev=e},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"key+value")},forEach:function(e){for(var t=arguments.length>1?arguments[1]:null,n=this.entries(),r=n.next();!r.done;r=n.next())t?e.call(t,r.value[1],r.value[0],this):e(r.value[1],r.value[0],this)}}),T(n.prototype,function(){return this.entries()}),n}(),Set:function(){var e=function(e){var t=this;if(!x.TypeIsObject(t))throw new TypeError("Set does not accept arguments when called as a function");if(t=D(t),!t._es6set)throw new TypeError("bad set");if(y(t,{"[[SetData]]":null,_storage:K()}),"undefined"!=typeof e&&null!==e){var n=x.GetIterator(e),r=t.add;if(!x.IsCallable(r))throw new TypeError("bad set");for(;;){var i=x.IteratorNext(n);if(i.done)break;var o=i.value;r.call(t,o)}}return t},t=e.prototype;y(e,{"@@create":function(e){var n=this,r=n.prototype||t;return e=e||b(r),y(e,{_es6set:!0}),e}});var n=function(e){if(!e["[[SetData]]"]){var t=e["[[SetData]]"]=new X.Map;Object.keys(e._storage).forEach(function(e){e=36===e.charCodeAt(0)?e.slice(1):"n"===e.charAt(0)?+e.slice(1):+e,t.set(e,e)}),e._storage=null}};return g.getter(e.prototype,"size",function(){if("undefined"==typeof this._storage)throw new TypeError("size method called on incompatible Set");return n(this),this["[[SetData]]"].size}),y(e.prototype,{has:function(e){var t;return this._storage&&null!==(t=Z(e))?!!this._storage[t]:(n(this),this["[[SetData]]"].has(e))},add:function(e){var t;return this._storage&&null!==(t=Z(e))?(this._storage[t]=!0,this):(n(this),this["[[SetData]]"].set(e,e),this)},"delete":function(e){var t;if(this._storage&&null!==(t=Z(e))){var r=d(this._storage,t);return delete this._storage[t]&&r}return n(this),this["[[SetData]]"]["delete"](e)},clear:function(){this._storage?this._storage=K():this["[[SetData]]"].clear()},values:function(){return n(this),this["[[SetData]]"].values()},entries:function(){return n(this),this["[[SetData]]"].entries()},forEach:function(e){var t=arguments.length>1?arguments[1]:null,r=this;n(r),this["[[SetData]]"].forEach(function(n,i){t?e.call(t,i,i,r):e(i,i,r)})}}),v(e,"keys",e.values,!0),T(e.prototype,function(){return this.values()}),e}()};y(a,X),(a.Map||a.Set)&&("function"!=typeof a.Map.prototype.clear||0!==(new a.Set).size||0!==(new a.Map).size||"function"!=typeof a.Map.prototype.keys||"function"!=typeof a.Set.prototype.keys||"function"!=typeof a.Map.prototype.forEach||"function"!=typeof a.Set.prototype.forEach||t(a.Map)||t(a.Set)||!n(a.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}))&&(a.Map=X.Map,a.Set=X.Set),a.Set.prototype.keys!==a.Set.prototype.values&&v(a.Set.prototype,"keys",a.Set.prototype.values,!0),T(Object.getPrototypeOf((new a.Map).keys())),T(Object.getPrototypeOf((new a.Set).keys()))}return a});