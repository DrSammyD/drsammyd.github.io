!function(t,e,n){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.0",settings:{index:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,sticky_on:"all"},init:function(e,n,i){Foundation.inherit(this,"add_custom_rule register_media throttle");var a=this;a.register_media("topbar","foundation-mq-topbar"),this.bindings(n,i),a.S("["+this.attr_name()+"]",this.scope).each(function(){{var e=t(this),n=e.data(a.attr_name(!0)+"-init");a.S("section, .top-bar-section",this)}e.data("index",0);var i=e.parent();i.hasClass("fixed")||a.is_sticky(e,i,n)?(a.settings.sticky_class=n.sticky_class,a.settings.sticky_topbar=e,e.data("height",i.outerHeight()),e.data("stickyoffset",i.offset().top)):e.data("height",e.outerHeight()),n.assembled||a.assemble(e),n.is_hover?a.S(".has-dropdown",e).addClass("not-click"):a.S(".has-dropdown",e).removeClass("not-click"),a.add_custom_rule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }"),i.hasClass("fixed")&&a.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,e,n){var i=e.hasClass(n.sticky_class);return i&&"all"===n.sticky_on?!0:i&&this.small()&&"small"===n.sticky_on?matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches&&!matchMedia(Foundation.media_queries.large).matches:i&&this.medium()&&"medium"===n.sticky_on?matchMedia(Foundation.media_queries.small).matches&&matchMedia(Foundation.media_queries.medium).matches&&!matchMedia(Foundation.media_queries.large).matches:i&&this.large()&&"large"===n.sticky_on?matchMedia(Foundation.media_queries.small).matches&&matchMedia(Foundation.media_queries.medium).matches&&matchMedia(Foundation.media_queries.large).matches:!1},toggle:function(n){var i,a=this;i=n?a.S(n).closest("["+this.attr_name()+"]"):a.S("["+this.attr_name()+"]");var r=i.data(this.attr_name(!0)+"-init"),s=a.S("section, .top-bar-section",i);a.breakpoint()&&(a.rtl?(s.css({right:"0%"}),t(">.name",s).css({right:"100%"})):(s.css({left:"0%"}),t(">.name",s).css({left:"100%"})),a.S("li.moved",s).removeClass("moved"),i.data("index",0),i.toggleClass("expanded").css("height","")),r.scrolltop?i.hasClass("expanded")?i.parent().hasClass("fixed")&&(r.scrolltop?(i.parent().removeClass("fixed"),i.addClass("fixed"),a.S("body").removeClass("f-topbar-fixed"),e.scrollTo(0,0)):i.parent().removeClass("expanded")):i.hasClass("fixed")&&(i.parent().addClass("fixed"),i.removeClass("fixed"),a.S("body").addClass("f-topbar-fixed")):(a.is_sticky(i,i.parent(),r)&&i.parent().addClass("fixed"),i.parent().hasClass("fixed")&&(i.hasClass("expanded")?(i.addClass("fixed"),i.parent().addClass("expanded"),a.S("body").addClass("f-topbar-fixed")):(i.removeClass("fixed"),i.parent().removeClass("expanded"),a.update_sticky_positioning())))},timer:null,events:function(){var n=this,i=this.S;i(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),n.toggle(this)}).on("click.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(){var e=t(this).closest("li");!n.breakpoint()||e.hasClass("back")||e.hasClass("has-dropdown")||n.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(e){var a=i(this),r=i(e.target),s=a.closest("["+n.attr_name()+"]"),o=s.data(n.attr_name(!0)+"-init");return r.data("revealId")?void n.toggle():void(n.breakpoint()||(!o.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),a.hasClass("hover")?(a.removeClass("hover").find("li").removeClass("hover"),a.parents("li.hover").removeClass("hover")):(a.addClass("hover"),t(a).siblings().removeClass("hover"),"A"===r[0].nodeName&&r.parent().hasClass("has-dropdown")&&e.preventDefault())))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){if(n.breakpoint()){t.preventDefault();var e=i(this),a=e.closest("["+n.attr_name()+"]"),r=a.find("section, .top-bar-section"),s=(e.next(".dropdown").outerHeight(),e.closest("li"));a.data("index",a.data("index")+1),s.addClass("moved"),n.rtl?(r.css({right:-(100*a.data("index"))+"%"}),r.find(">.name").css({right:100*a.data("index")+"%"})):(r.css({left:-(100*a.data("index"))+"%"}),r.find(">.name").css({left:100*a.data("index")+"%"})),a.css("height",e.siblings("ul").outerHeight(!0)+a.data("height"))}}),i(e).off(".topbar").on("resize.fndtn.topbar",n.throttle(function(){n.resize.call(n)},50)).trigger("resize").trigger("resize.fndtn.topbar").load(function(){i(this).trigger("resize.fndtn.topbar")}),i("body").off(".topbar").on("click.fndtn.topbar",function(t){var e=i(t.target).closest("li").closest("li.hover");e.length>0||i("["+n.attr_name()+"] li.hover").removeClass("hover")}),i(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var e=i(this),a=e.closest("["+n.attr_name()+"]"),r=a.find("section, .top-bar-section"),s=(a.data(n.attr_name(!0)+"-init"),e.closest("li.moved")),o=s.parent();a.data("index",a.data("index")-1),n.rtl?(r.css({right:-(100*a.data("index"))+"%"}),r.find(">.name").css({right:100*a.data("index")+"%"})):(r.css({left:-(100*a.data("index"))+"%"}),r.find(">.name").css({left:100*a.data("index")+"%"})),0===a.data("index")?a.css("height",""):a.css("height",o.outerHeight(!0)+a.data("height")),setTimeout(function(){s.removeClass("moved")},300)}),i(this.scope).find(".dropdown a").focus(function(){t(this).parents(".has-dropdown").addClass("hover")}).blur(function(){t(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var t=this;t.S("["+this.attr_name()+"]").each(function(){var e,i=t.S(this),a=i.data(t.attr_name(!0)+"-init"),r=i.parent("."+t.settings.sticky_class);if(!t.breakpoint()){var s=i.hasClass("expanded");i.css("height","").removeClass("expanded").find("li").removeClass("hover"),s&&t.toggle(i)}t.is_sticky(i,r,a)&&(r.hasClass("fixed")?(r.removeClass("fixed"),e=r.offset().top,t.S(n.body).hasClass("f-topbar-fixed")&&(e-=i.data("height")),i.data("stickyoffset",e),r.addClass("fixed")):(e=r.offset().top,i.data("stickyoffset",e)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(e){var n=this,i=e.data(this.attr_name(!0)+"-init"),a=n.S("section, .top-bar-section",e);a.detach(),n.S(".has-dropdown>a",a).each(function(){var e,a=n.S(this),r=a.siblings(".dropdown"),s=a.attr("href");r.find(".title.back").length||(e=t(1==i.mobile_show_parent_link&&s?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link show-for-small-only"><a class="parent-link js-generated" href="'+s+'">'+a.html()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),t("h5>a",e).html(1==i.custom_back_text?i.back_text:"&laquo; "+a.html()),r.prepend(e))}),a.appendTo(e),this.sticky(),this.assembled(e)},assembled:function(e){e.data(this.attr_name(!0),t.extend({},e.data(this.attr_name(!0)),{assembled:!0}))},height:function(e){var n=0,i=this;return t("> li",e).each(function(){n+=i.S(this).outerHeight(!0)}),n},sticky:function(){var t=this;this.S(e).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t="."+this.settings.sticky_class,n=this.S(e),i=this;if(i.settings.sticky_topbar&&i.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var a=this.settings.sticky_topbar.data("stickyoffset");i.S(t).hasClass("expanded")||(n.scrollTop()>a?i.S(t).hasClass("fixed")||(i.S(t).addClass("fixed"),i.S("body").addClass("f-topbar-fixed")):n.scrollTop()<=a&&i.S(t).hasClass("fixed")&&(i.S(t).removeClass("fixed"),i.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(e).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document);